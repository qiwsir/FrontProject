<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width,user-scalable=no" />
<title>test</title>

<link href="css/style.css" rel="stylesheet">
<link type="text/css" rel="stylesheet" href="css/app.css" />
<link type="text/css" rel="stylesheet" href="css/jquery.mmenu.all.css" />

<!--script src="js/jquery-1.4.4.min.js" type="text/javascript"></script-->
<script src="js/MobileAPI.js" type="text/javascript"></script>
<script src="js/layer.m.js" type="text/javascript"></script>
<!--script src="js/scriptjs.js" type="text/javascript"></script-->
<script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
<script src="js/m-dropdown.min.js"></script>
<script src="js/m-radio.min.js"></script>
<script type="text/javascript" src="js/jquery.mmenu.min.all.js"></script>
<script type="text/javascript">
	$(function() {
		$('nav#menu').mmenu();
	});
</script>
</head>

<body onload="loadPage()">
<div id="page">
<!--div class="container"-->
    <div class="header fixed">
		<a href="#menu"></a>
		企业网银测试
    </div>	
	<!-- answer questions -->
    <div class="main_div" style="margin-top:4em;">
            <!--信息提示-->
            <div class="passinfo" id="passinfo"></div>
			
            <!--单项选择题目，如果是判断题，也可以用这个模块，将选项设置为两个：正确、错误；-->
            <div class="question">
                <div class="single_option">    <!--用class标记题型-->
                    <dl>
				<dt><span class="number">1</span>沟通影响能力属于平安胜任素质模型中的哪一个模块：</dt>
				<dd><input type="radio" name="radio" value="A">A、想事</dd>
				<dd><input type="radio" name="radio" value="B" >B、做事</dd>
				<dd><input type="radio" name="radio" value="C" >C、带队伍</dd>
				<dd><input type="radio" name="radio" value="D" >D、基础能力</dd>
                    </dl>
                    <!--本题目的答案-->
                    <div class="rightanswer">正确答案：<span class="questionresult">A</span></div>
                </div>
            </div>
            <!--end-->
			
            <!--多项选择题，如果要启用本题，可将注释去除注释符号-->	
            <div class="question">
			<div class = "multi_option">
				<dl>
					<dt><span class="number">2</span>这是多项选择题,正确答案是ABC：</dt>
					<dd><input type="checkbox" name="checkbox" value="A" >A. 第一个正确选项</dd>
					<dd><input type="checkbox" name="checkbox" value="B">B. 第二个正确选项</dd>
					<dd><input type="checkbox" name="checkbox" value="C">C. 第三个正确选项</dd>
					<dd><input type="checkbox" name="checkbox" value="D">D. 这是一个错误选项</dd>
				</dl>
					
				<!--本题目的答案(注意：下面答案中的都好为半角，也就是英文状态下的)-->
					
				<div class="rightanswer">正确答案：<span class="multi_option_answer">A,B,C</span></div>
			</div>
		</div>
		<!--end-->
				
            <!--匹配题目-->
            <div class="question">
			<div class="match_problem">
				<dl>
					<dt><span class="number">3</span>请分别指出以下定义对应的是战略前瞻的哪一个能力层级：</dt>
					<dd><p>A、洞察先机，着眼全局，打破传统的思维和模式，构建差异化全新的经营战略，建立新的长期竞争壁垒。</p>
							<select id="sel_a" >
								<option value="O" selected>--请选择--</option>
								<option value="A">构思战略变革</option>
								<option value="B">主动承接战略</option>
								<option value="C">职能/区域战略设计</option>
								<option value="D">搭建战略规划</option>
							</select>
					</dd>
					<dd>	<p>B、清晰理解公司战略，根据战略把握全年工作的轻重缓急和优先次序，主动寻求更有效的工作方式支持战略实现。</p>
							<select id="sel_b">
								<option value="O" selected>--请选择--</option>
								<option value="A">构思战略变革</option>
								<option value="B">主动承接战略</option>
								<option value="C">职能/区域战略设计</option>
								<option value="D">搭建战略规划</option>
							</select>
					</dd>
					<dd><p>C、根据职能或局部区域的特点和条件，为公司战略制定提出建议，参与组织战略制定研讨，设计所辖职能或区域的发展战略。</p>
							<select id="sel_c">
								<option value="O" selected>--请选择--</option>
								<option value="A">构思战略变革</option>
								<option value="B">主动承接战略</option>
								<option value="C">职能/区域战略设计</option>
								<option value="D">搭建战略规划</option>
							</select>
					</dd>
					<dd><p>D、基于行业竞争格局，定义中长期发展的根本问题和趋势，前瞻地确定战略方向，规划出切实的行动路径，从而不断强化公司竞争优势。</p>
							<select id="sel_d">
							<option value="O" selected>--请选择--</option>
								<option value="A">构思战略变革</option>
								<option value="B">主动承接战略</option>
								<option value="C">职能/区域战略设计</option>
								<option value="D">搭建战略规划</option>
							</select>
					</dd>
				</dl>
				<!--本题目答案，对应匹配结果的项目-->	
				<div class="rightanswer" id="rightanswer">正确答案：<span class="match_problem_answer">A,B,C,D</span></div>
			</div>
			
            </div>
            <!--end-->
    </div>
    <div style="text-align:center;margin-bottom:0.5em;" id="sub_cont">
        <input type="image" value="submit" id="question_btn" src='images/takebtn.png'>
    </div>
    
    <nav id="menu">
        <ul>
            <li><a href="default.html">首页</a></li>
            <li><a href="leftright.html">政策与实务(左右翻)<img id="leftright" src="images/lock1.png" style="width:15px; margin-left:5px;"/></a></li>
            <li><a href="longpic.html">企业网银(长图)<img id="longpic" src="images/lock1.png" style="width:15px; margin-left:5px;"/></a></li>
            <li><a href="video.html">网上银行(视频)<img id="video" src="images/lock1.png" style="width:15px; margin-left:5px;"/></a></li>
            <li><a href="updown.html">申请步骤(上下翻)<img id="updown" src="images/lock1.png" style="width:15px; margin-left:5px;"/></a></li>
        </ul>
    </nav>
	
</div>
<script src="js/cookie.min.js"></script>
<script src="js/thisappjs.js"></script>
<script>
answers = {};
questions = 0; 	//题目数量

//点击提交按钮
$(function(){
	$("#question_btn").click(function(){
		//right_answer(); 		//从网页的设置中得到所有题目的正确答案
        //alert(answers['1']['answer'][0]);
		var check_result = check_user_answers();
		if (check_result>0){ 	//题目都已经回答
			var right_user_answers = check_result - 1;
			//根据规则显示用户是否通过考试
			var test_result = pass_test(questions, right_user_answers);
			if (test_result){		//通过考试
				//$("#video").css("display", "none");
				//$("#notpass").css("display", "none");
				//$("#error").css("display", "none");
				//$("#testnote").css("display", "none");
				//$("#passinfo").css("display", "block");
				//$("#passinfo").html("<div class='maincontent'><p class='pinfo'>恭喜您顺利过关！</p><p class='pinfo'>下面是你的测试结果</p></div>");
				$(".rightanswer").css("display", "block");
				$("#question_btn").css("display", 'none');
                      $("#sub_cont").html("<a href='video.html'><img src='images/continue.jpg' style='width:215px; height:49px'/></a>");    //继续学习下一个内容
				layer.open({
					content: '恭喜您顺利过关！请继续学习。',
					style: 'background-color:#09C1FF; color:#fff; border:none;',
					time: 2
				});
				scoFinished();
			}else{		//未通过考试
				layer.open({
					content: '很遗憾，没有通过测试。请重新学习',
					style: 'background-color:#09C1FF; color:#fff; border:none;',
					time: 2
				});
				$('body, html').animate({scrollTop: 0}, 1000);
				
			}
		}else{ 		//尚有题目未回答
			layer.open({
					content: '您还有题目没有回答，请继续。',
					style: 'background-color:#09C1FF; color:#fff; border:none;',
					time: 2
				});
		}
	});
});

function loadPage(){
	right_answer();
    learned();
}
//获得所有题目的标准答案
function right_answer(){
	var problems = $(".question");
	questions = problems.length
	for (var i=0; i<problems.length; i++){
		var this_answer = {};
		var problem_style = problems[i].children[0]["className"]; 		//题目类型
		var problem_number = problems[i].children[0].children[0].children[0].children[0].innerHTML; 		//题号
		var problem_answer = problems[i].children[0].children[1].children[0].innerHTML; 		//标准答案
		var problem_answer_lst = problem_answer.split(",");
		this_answer["style"] = problem_style;
		this_answer["answer"] =problem_answer_lst;
		this_answer['do_answer'] = ' ';
		answers[problem_number] = this_answer;
	}
}

//获取用户单选题结果
$(function(){
	$(":radio").click(function(){
		var pNode = $(this).parents("div.question");
		var qNum = $(pNode).find("span.number").html();
		//alert(qNum);
		var result = [];
            
            var radioitem = $(":radio:checked");
            var len = radioitem.length;
            if (len > 0){
                result.push($(":radio:checked").val());
                //alert("the value is: " + $(":radio:checked").val());
            }
		answers[qNum]["do_answer"] = result;
		});
	});
    
//获取用户多选题结果
$(function(){
	$(":checkbox").click(function(){
		var pNode = $(this).parents("div.question");
		var qNum = $(pNode).find("span.number").html();
		var result = [];
            
		pNode.find("input[type='checkbox']:checked").each(function(){
                result.push($(this).val());
            });
		answers[qNum]["do_answer"] = result;
		});
	});
//匹配题结果
$(function(){
	$("select").change(function(){
		var pNode = $(this).parents("div.question");
		var qNum = $(pNode).find("span.number").html();
		//alert(qNum)
		var result = [];
		pNode.find("option:selected").each(function(){
                if($(this).val()){
                    result.push($(this).val());
                }
		answers[qNum]["do_answer"] = result;
		})
	})
})

//判断用户回答的结果是否正确，并保存判断结果
function check_user_answers(){
	var i = 1;
	for (var problem_number in answers){
		if (answers[problem_number]['do_answer']==" "){ 	//如果没有回答完毕，返回false
			return false;
		}else{
			//判断是否正确并将结果记录
			right_answer = answers[problem_number]['answer'].join();
			user_answer = answers[problem_number]['do_answer'].join();
			if (right_answer == user_answer){
				answers[problem_number]['result'] = true;
				i += 1;
			}else{
				answers[problem_number]['result'] = false;
			}
		}
	}
	return i;
}

//判断是否通过考试的标准（如果大于等于10个题目，正确率为80%为通过，如果小于10个题目，必须全部答对才能通过）
function pass_test(questions_number, right_answers_number){
	if (questions_number < 10){
		if (questions_number == right_answers_number){
			return true;
			}else{
				return false;
			}
	}else{
		rate = (questions_number*0.8).toFixed(1);
		if (right_answers_number >= rate){
			return true;
		}else{
			return false;
		}
	}
}


//非scorm标准的函数
function scoFinished(){
    //alert("您已完成本sco学习！")
	App.call("doMobileSetValue", "cmi.core.lesson_status", "completed",function(e){
		//alert(e);
	})
	App.call("doMobileCommit")
}

function learned(){
    cookie.set("longpic","learned");
    startLearn();
}
</script>
</body>
</html>